# Задания 3 спринта

## 1.1
В качестве описания функциональности добавил схему доменов см. файл ./docs/1.1 domain.puml
Предполагаю, что функциональность монолита будет совпадать, поэтому описываю её на основе этой схемы доменов:
1. Управление устройствами. Содержит все функции для отправки команд устройствам умного дома, сбора измерительной информации, мониторинга системы. Соответственно выделены микросервисы.

Device management - формирование и отправка команд устройствам. Содержит алгоритмы изменения температуры (чтобы поменять температуру, нужно проверить текущее значение, предупредить пользователя если требуется, установить новое значение), алгоритмы изменения конфигурации устройств (например чтобы добавить новое устройство, нужно прочитать его конфигурацию, зарегистрировать в системе, выдать IP адрес).

Metering data processing - сбор, обработка, сохранение исторических данных в реляционной БД. Датчики  подключенные к системе непрерывно в реальном времени публикуют результаты измерений. Для независимости этого процесса от бэкенда системы используется шина событий. Микросервис читает события из неё, возможно добогащает данными и сохраняет в таблицы столбчатой БД. Клиент хочет посмотреть как менялись показатели работы системы (температура теплоносителя, температура в доме, напряжение сети). Для этого он обращается в данный микросервис для получения страницы истории по заданному показателю.

Device controller application - программно-аппаратный контроллер, который предоставляет интерфейс ко всем устройствам в системе умного дома. Устанавливается непосредственно в доме, подключается к интернету через Wi-Fi или GSM сеть для коммуникации с бэкендом.

Monitoring - отслеживание событий системы, которые необходимо передать пользователю или системе. Реализует бизнес правила, например при пропадании питания сети: зарегистрируй событие, отправь уведомление через сервис нотификации или при понижении температуры ниже пороговой отправь команду включения горелки.

2. Управление пользователями. Содержит функции работы с профилями пользователей, привзяка домов, выбор тарифов и оплата услуг, авторизация.

Profiles management - операции создания нового пользователя, редактирования профиля, смена пароля и привязка к домам. Пользователь с помощью функий поддомена может добавлять к дому других пользователей системы и назначать им роли.

Billing - ведение тарифов и автоматической оплаты, генерация счетов и актов предоставления услуг. Ведение истории оплат. Интеграция с платёжными шлюзами.

Notifications - модуль уведомлений пользователя. В зависимости от выбранного способа (SMS, e-mail, push) отправляет пользователю сообщения. Содержит функции работы с шаблонами оповещений.

Контекстная диаграмма c4 см. файл ./docs/1.1 monolith-context.puml

## 1.2
См. файлы: 
1. ./docs/1.2 container.puml
2. ./docs/1.2 component.puml 
3. ./docs/1.2 classes.puml

## 1.3
См. файл ./docs/1.3 er.puml

## 1.4
См. фвйл ./docs/1.4 data-processor-swagger.yaml